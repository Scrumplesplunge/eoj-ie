{"version":3,"file":"user-main.js","mappings":"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","sources":["webpack://space-race/./src/constants.ts","webpack://space-race/./src/math.ts","webpack://space-race/webpack/bootstrap","webpack://space-race/./src/user-main.ts"],"sourcesContent":["// Dimensions of the rocket.\nexport const ROCKET_WIDTH = 10;     // Diameter of the rocket, in metres.\nexport const ROCKET_HEIGHT = 50;    // Height of the rocket, in metres.\n\n// The mass of the rocket, excluding the mass of any fuel it is carrying.\nexport const ROCKET_MASS =\n    2000 * Math.PI * ROCKET_WIDTH ** 2 * ROCKET_HEIGHT / 4;\n\n// The initial amount of fuel, of each type, in kg.\nexport const FUEL = 10000000;\nexport const RCS_FUEL = 10000;\n\n// The maximum thrust of the rocket thrusters, in kgm/s^2.\nexport const ROCKET_THRUST = 2e9;\nexport const RCS_THRUST = 2e6;\n\n// The maximum angle of the main thruster, relative to the rocket's orientation.\nexport const MAX_ROCKET_THRUSTER_ANGLE = 1;\n\n// Given the target:\n//\n//   Orbit time:     2 minutes\n//   Orbit speed: 1000 m/s\n//\n// We can derive:\n//\n//   Orbit circumference = 1000 m/s * 2 minutes = 120 km\n//   Orbit radius = 120km / (2 * PI) ~= 19km\n//   Gravity = (1000 m/s)^2 * (120km / (2 * PI)) ~= 19 Mm^3/s^2\n//\n// Thus, PLANET_RADIUS + ATMOSPHERE_SIZE should be just under 19km.\nexport const GRAVITY = 1e3 ** 2 * 120e3 / (2 * Math.PI);\nexport const PLANET_RADIUS = 15000;  // Radius of the planet, in metres.\nexport const ATMOSPHERE_SIZE = 4000;  // Height of the atmosphere, in metres.\n\n// The speed of radio transmissions, in metres per second.\nexport const TRANSMISSION_SPEED = 30000;\n\n// How long it takes for the planet to do a full rotation.\nexport const PLANET_DAY = 3600;\n\n// The amount of time between consecutive simulation ticks, in seconds.\nexport const DELTA_TIME = 1/128;\n\n// The amount of time between consecutive sensor samples, in seconds.\nexport const SENSOR_TIME = 1/16;\n","export class Vector {\n  // Constructs a random vector with a two-dimensional normal distribution.\n  static random() {\n    const r = Math.sqrt(-2 * Math.log(1 - Math.random()));\n    const theta = 2 * Math.PI * Math.random();\n    return new Vector(r * Math.cos(theta), r * Math.sin(theta));\n  }\n\n  // Constructs a unit vector from an angle.\n  static fromAngle(radians) {\n    return new Vector(Math.cos(radians), Math.sin(radians));\n  }\n\n  constructor(public x: number, public y: number) {}\n\n  neg(): Vector { return new Vector(-this.x, -this.y) }\n  add(v: Vector): Vector { return new Vector(this.x + v.x, this.y + v.y) }\n  sub(v: Vector): Vector { return new Vector(this.x - v.x, this.y - v.y) }\n  mul(s: number): Vector { return new Vector(this.x * s, this.y * s) }\n  dot(v: Vector): number { return this.x * v.x + this.y * v.y }\n  cross(v: Vector): number { return this.x * v.y - this.y * v.x }\n  len(): number { return Math.sqrt(this.dot(this)) }\n  rot90(): Vector { return new Vector(-this.y, this.x) }\n  norm(): Vector { return this.mul(1 / this.len()) }\n}\n\nexport class Matrix {\n  static rotate(theta: number): Matrix {\n    const c = Math.cos(theta), s = Math.sin(theta);\n    return new Matrix(new Vector(c, s), new Vector(-s, c));\n  }\n\n  static fromRows(a: Vector, b: Vector): Matrix {\n    return new Matrix(new Vector(a.x, b.x), new Vector(a.y, b.y));\n  }\n\n  constructor(public a: Vector, public b: Vector) {}\n\n  apply(v: Vector): Vector { return this.a.mul(v.x).add(this.b.mul(v.y)) }\n\n  determinant(): number {\n    return this.a.cross(this.b);\n  }\n\n  inverse(): Matrix {\n    const d = this.determinant();\n    if (d == 0) throw new Error('Inverting a non-invertible matrix');\n    const k = 1 / d;\n    return new Matrix(new Vector(k * this.b.y, k * -this.a.y),\n                      new Vector(k * -this.b.x, k * this.a.x));\n  }\n}\n\nconst PI = Math.PI;\nconst TAU = 2 * PI;\n\nexport function angnorm(x: number): number {\n  return ((x + PI) % TAU + TAU) % TAU - PI;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import * as api from './api';\nimport * as constants from './constants';\nimport * as math from './math';\n\n// Export all of the constants and math utilities to the global scope.\nObject.assign(self, {...api, ...constants, ...math});\n"],"names":["ROCKET_WIDTH","ROCKET_HEIGHT","ROCKET_MASS","Math","PI","FUEL","RCS_FUEL","ROCKET_THRUST","RCS_THRUST","MAX_ROCKET_THRUSTER_ANGLE","GRAVITY","PLANET_RADIUS","ATMOSPHERE_SIZE","TRANSMISSION_SPEED","PLANET_DAY","DELTA_TIME","SENSOR_TIME","Vector","constructor","x","y","static","r","sqrt","log","random","theta","cos","sin","radians","neg","this","add","v","sub","mul","s","dot","cross","len","rot90","norm","Matrix","a","b","c","apply","determinant","inverse","d","Error","k","TAU","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","Object","assign","self","api","constants","math"],"sourceRoot":""}